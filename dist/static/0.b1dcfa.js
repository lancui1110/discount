webpackJsonp([0,2],{63:function(t,e){"use strict";function a(t,e){var a=new Date(t),u=a.getFullYear(),o=a.getMonth()+1,l=a.getDate(),r=a.getHours(),d=a.getMinutes(),i=a.getSeconds();switch(e){case 0:return n(o)+"-"+n(l);case 1:return n(r)+"-"+n(d);case 2:return u+"-"+n(o)+"-"+n(l);case 3:return u+"-"+n(o)+"-"+n(l)+"  "+n(r)+":"+n(d);default:return u+"-"+n(o)+"-"+n(l)+"  "+n(r)+":"+n(d)+":"+n(i)}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=a;var n=function(t){return t>=10?t:"0"+t}},64:function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function u(t){this.setState((0,l.default)({},t.target.name,t.target.value.trim()))}Object.defineProperty(e,"__esModule",{value:!0});var o=a(39),l=n(o);e.default=u},131:function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u,o,l=a(11),r=n(l),d=a(7),i=n(d),s=a(8),f=n(s),c=a(13),p=n(c),v=a(12),h=n(v),m=a(1),g=(n(m),a(82)),_=n(g),y=a(64),b=n(y),N=a(215),T=n(N),M=function(){return{id:"",title:"",content:""}},S=function(t){return t.startsWith("/msg/add")},O=(o=u=function(t){function e(t,a){(0,i.default)(this,e);var n=(0,p.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t,a));return n.state=M(),n.handleChange=b.default.bind(n),n}return(0,h.default)(e,t),(0,f.default)(e,[{key:"componentDidMount",value:function(){this.updateState()}},{key:"componentWillReceiveProps",value:function(t){this.updateState(t)}},{key:"updateState",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,a=e.location,n=e.params.msgId,u=e.userData.username,o=e.msg.msgs;if(S(a.pathname))return this.setState(M());if(o.length){var l=o.filter(function(t){var e=t.id;return e===n})[0];return l&&l.author===u?this.setState(l):this.handleIllegal()}_.default.fetch({msgId:n}).then(function(e){var a=e.id,n=e.title,o=e.content,l=e.author;return e&&l===u?void t.setState({id:a,title:n,content:o}):t.handleIllegal()})}},{key:"handleIllegal",value:function(){setTimeout(function(){return alert("非法访问")}),location.replace("/msg")}},{key:"handleSubmit",value:function(t){var e=this;t.preventDefault();var a=this.props.location.pathname,n=S(a)?"addMsg":"modMsg";this.updateState=function(){},this.props[n](this.state).then(function(t){var a=t.id;e.context.router.replace("/msg/detail/"+a)})}},{key:"render",value:function(){return T.default.call(this)}}]),e}(m.Component),u.contextTypes={router:m.PropTypes.object.isRequired},o);e.default=O},135:function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.ACTION_HANDLERS=void 0;var u,o=a(39),l=n(o),r=a(50),d=n(r),i=a(84),s=n(i),f="ADD_TODO",c="DEL_TODO",p="TOGGLE_TODO",v=function(t){return{type:f,payload:{id:setTimeout(function(){}),content:t,completed:!1,createdAt:Date.now()}}},h=function(t){return{type:p,payload:t}},m=function(t){return{type:c,payload:t}};e.default={addTodo:v,toggleTodo:h,delTodo:m};e.ACTION_HANDLERS=(u={},(0,l.default)(u,f,function(t,e){var a=e.payload;return[].concat((0,s.default)(t),[a])}),(0,l.default)(u,p,function(t,e){var a=e.payload;return t.map(function(t){return t.id===a?(0,d.default)({},t,{completed:!t.completed}):t})}),(0,l.default)(u,c,function(t,e){var a=e.payload;return t.filter(function(t){return t.id!==a})}),u)},215:function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var u=a(9),o=n(u);e.default=function(){var t=this;return(0,o.default)("form",{onSubmit:function(e){return t.handleSubmit(e)}},void 0,(0,o.default)("div",{className:"form-group"},void 0,r,(0,o.default)("input",{type:"text",className:"form-control",name:"title",placeholder:"请输入标题...",onChange:this.handleChange,value:this.state.title})),(0,o.default)("div",{className:"form-group"},void 0,d,(0,o.default)("textarea",{name:"content",className:"form-control",rows:"3",placeholder:"请输入内容...",onChange:this.handleChange,value:this.state.content},void 0)),(0,o.default)("div",{role:"group",className:"btn-group btn-group-justified"},void 0,(0,o.default)("div",{className:"btn-group",role:"group"},void 0,(0,o.default)("button",{type:"button",className:"btn btn-warning",onClick:function(){return t.context.router.goBack()}},void 0,i," 取消")),s))};var l=a(1),r=(n(l),(0,o.default)("label",{htmlFor:"title"},void 0,"标题")),d=(0,o.default)("label",{htmlFor:"content"},void 0,"内容"),i=(0,o.default)("span",{className:"glyphicon glyphicon-arrow-left"}),s=(0,o.default)("div",{className:"btn-group",role:"group"},void 0,(0,o.default)("button",{type:"submit",className:"btn btn-success"},void 0,"提交 ",(0,o.default)("span",{className:"glyphicon glyphicon-ok"})))},226:function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u=a(9),o=n(u),l=a(11),r=n(l),d=a(7),i=n(d),s=a(8),f=n(s),c=a(13),p=n(c),v=a(12),h=n(v),m=a(1),g=(n(m),a(64)),_=n(g),y=function(t){function e(t){(0,i.default)(this,e);var a=(0,p.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t));return a.state={inputVal:""},a.handleChange=_.default.bind(a),a}return(0,h.default)(e,t),(0,f.default)(e,[{key:"handleSubmit",value:function(){var t=this.state.inputVal.trim();t&&(this.props.addTodo(t),this.setState({inputVal:""}))}},{key:"render",value:function(){var t=this;return(0,o.default)("form",{onSubmit:function(e){e.preventDefault(),t.handleSubmit()}},void 0,(0,o.default)("div",{className:"form-group"},void 0,(0,o.default)("input",{type:"text",className:"form-control",name:"inputVal",placeholder:"请输入待办事项，敲回车确认添加",required:!0,value:this.state.inputVal,onChange:this.handleChange})))}}]),e}(m.Component);e.default=y},227:function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u=a(9),o=n(u),l=a(11),r=n(l),d=a(7),i=n(d),s=a(8),f=n(s),c=a(13),p=n(c),v=a(12),h=n(v),m=a(1),g=(n(m),a(226)),_=n(g),y=a(63),b=n(y),N=function(t){function e(){return(0,i.default)(this,e),(0,p.default)(this,(e.__proto__||(0,r.default)(e)).apply(this,arguments))}return(0,h.default)(e,t),(0,f.default)(e,[{key:"delTodo",value:function(t){confirm("确认删除？")&&this.props.delTodo(t)}},{key:"render",value:function(){var t=this,e=this.props,a=e.todos,n=e.addTodo,u=e.toggleTodo;return(0,o.default)("div",{},void 0,(0,o.default)("ul",{},void 0,a.map(function(e){return(0,o.default)("li",{onClick:function(){return u(e.id)}},e.id,(0,o.default)("span",{style:{textDecoration:e.completed?"line-through":"none"}},void 0,e.content),(0,o.default)("a",{href:"javascript:;",style:{textDecoration:"none"},className:"pull-right",onClick:function(){return t.delTodo(e.id)}},void 0,"⊗"),(0,o.default)("span",{className:"label label-default pull-right"},void 0,(0,b.default)(e.createdAt)))})),(0,o.default)(_.default,{addTodo:n}))}}]),e}(m.Component);e.default=N},233:function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var u=a(62),o=n(u),l=a(135),r=a(49),d=n(r);e.default=(0,o.default)(d.default.todos,l.ACTION_HANDLERS)},246:function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var u=a(9),o=n(u),l=a(1),r=(n(l),(0,o.default)("div",{role:"alert",className:"alert alert-warning alert-dismissible"},void 0,(0,o.default)("button",{type:"button",className:"close","data-dismiss":"alert"},void 0,(0,o.default)("span",{"aria-hidden":"true"},void 0,"×")),(0,o.default)("strong",{},void 0,"该 Todo 示例无需 后端 RESTful API 支持"))),d=function(t){var e=t.children;return(0,o.default)("div",{className:"center-block"},void 0,r,e)};e.default=d}});